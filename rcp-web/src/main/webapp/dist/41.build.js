webpackJsonp([41],{478:function(t,e,i){"use strict";function a(t){i(850)}Object.defineProperty(e,"__esModule",{value:!0});var s=i(673),l=i(852),o=i(31),r=a,n=o(s.a,l.a,!1,r,null,null);e.default=n.exports},673:function(t,e,i){"use strict";function a(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}e.a={data:function(){var t;return t={resultShow:!1,showLine:!0,search:{searchDate:""},searchOption:{key:"search.searchDate",width:"10em",align:"right"}},a(t,"showLine",!0),a(t,"line",""),a(t,"tableShow",!1),a(t,"show",!0),a(t,"tableOption",{rowName:"data",column:[],queryType:"form",pageSize:9999,pageNumber:1,url:"keyCollection/analysis",method:"post",queryParam:{},isExport:!0,exportURL:"keyCollection/downKeyCollectionAnalysis"}),a(t,"btnGroup",[{name:"采集成功",num:0,url:"keyCollection/collectSucc"},{name:"采集失败",num:0,url:"keyCollection/collectFail"}]),a(t,"resultOpt",{rowName:"data",column:null,pageSize:99999,pageNumber:1,url:"realTimeData/querySuccessList",method:"post",isExport:!0,height:260,exportURL:"realTimeData/generateStatusExcel",noFooter:!0,queryParam:""}),a(t,"resultRow",null),a(t,"tabIndex",0),a(t,"controls",[]),t},computed:{columns:function(){return[{title:"抄表时间",field:"collectTime",textAlign:"center",width:"200"},{title:"抄表总数",field:"sumCount",textAlign:"center",width:"150"},{title:"失败数",field:"failCount",textAlign:"center",width:"150"},{title:"成功率 (%)",field:"successRate",textAlign:"center",type:"string",width:"150",formatter:function(t,e,i,a){return t}},{title:"上报成功率 (%)",field:"radioRate",textAlign:"center",type:"string",width:"150",formatter:function(t,e,i,a){return t}},{title:"召测成功率 (%)",field:"callRate",textAlign:"center",type:"string",width:"150",formatter:function(t,e,i,a){return t}}]},restCols:function(){return[[{title:"采集时间",textAlign:"center",width:"200",field:"collectTime"},{title:"客户名称",textAlign:"center",width:"200",field:"customerName"},{title:"表计编号",textAlign:"center",width:"200",field:"deviceNo"},{title:"表计户号",textAlign:"center",width:"200",field:"meterUserNo"},{title:"节点编号",textAlign:"center",width:"200",field:"collectNo"},{title:"客户地址",textAlign:"center",width:"200",field:"customerAddr"},{title:"安装位置",textAlign:"center",width:"200",field:"installAddr"}],[{title:"客户名称",textAlign:"center",width:"200",field:"customerName"},{title:"表计编号",textAlign:"center",width:"200",field:"deviceNo"},{title:"表计户号",textAlign:"center",width:"200",field:"meterUserNo"},{title:"节点编号",textAlign:"center",width:"200",field:"collectNo"},{title:"客户地址",textAlign:"center",width:"200",field:"customerAddr"},{title:"安装位置",textAlign:"center",width:"200",field:"installAddr"}]]}},methods:{getFrom:function(t){this.search.searchDate=t.val,this.$refs.myTable&&(this.makeLine(),this.$refs.myTable.resetTableOpt({queryParam:{searchDate:this.search.searchDate}}))},makeLine:function(){var t=this,e={color:["#5EAEE3","#c23531","#7d3b9e","#2f4554","#61a0a8","#d48265","#91c7ae","#749f83","#ca8622","#bda29a","#6e7074","#546570","#c4ccd3"],tooltip:{trigger:"axis",axisPointer:{type:"cross",crossStyle:{color:"#999"}}},toolbox:{show:!1,x:"center",feature:{dataView:{show:!0,readOnly:!1},magicType:{show:!0,type:["line","bar"]},restore:{show:!0},saveAsImage:{show:!0}}},grid:{top:40,bottom:60,left:70,right:50},legend:{data:["失败数","成功率"],top:"bottom",show:!1},dataZoom:[{startValue:"00:00",start:0,end:20},{type:"slider",handleIcon:"M10.7,11.9v-1.3H9.3v1.3c-4.9,0.3-8.8,4.4-8.8,9.4c0,5,3.9,9.1,8.8,9.4v1.3h1.3v-1.3c4.9-0.3,8.8-4.4,8.8-9.4C19.5,16.3,15.6,12.2,10.7,11.9z M13.3,24.4H6.7V23h6.6V24.4z M13.3,19.6H6.7v-1.4h6.6V19.6z",handleSize:"80%",handleStyle:{color:"#fff",shadowBlur:3,shadowColor:"rgba(0, 0, 0, 0.6)",shadowOffsetX:2,shadowOffsetY:2},backgroundColor:"#4E5A6A",fillerColor:"#777E88",borderColor:"#4E5A6A",textStyle:{color:"white"}}],xAxis:{type:"category",data:["1月","2月","3月","4月","5月","6月","7月","8月","9月","10月","11月","12月"],axisPointer:{type:"shadow"},axisLabel:{textStyle:{color:"#fff"}},axisLine:{lineStyle:{color:"#576373"}}},yAxis:[{type:"value",name:"成功率（%）",nameTextStyle:{color:"#fff"},min:0,max:100,axisLabel:{color:"#fff",formatter:"{value} %",textStyle:{color:"#fff"}},axisLine:{show:!1},axisTick:{show:!1},splitLine:{lineStyle:{color:"#576373"}}},{type:"value",name:"失败数",nameTextStyle:{color:"#fff"},min:0,axisLabel:{textStyle:{color:"#fff"}},splitLine:{lineStyle:{color:"#576373"}},axisLine:{show:!1},axisTick:{show:!1}}],series:[{name:"失败数",type:"bar",yAxisIndex:1,label:{normal:{position:"top",show:!0,color:"#fff",padding:[7,15,14,15],borderRadius:5,backgroundColor:{image:"dist/img/realTime/pop-up.png"}}},itemStyle:{normal:{color:new echarts.graphic.LinearGradient(0,0,0,1,[{offset:0,color:"#F96362"},{offset:.5,color:"#CC5A5E"},{offset:1,color:"#974F5A"}])},emphasis:{color:new echarts.graphic.LinearGradient(0,0,0,1,[{offset:0,color:"#2378f7"},{offset:.7,color:"#2378f7"},{offset:1,color:"#83bff6"}])}},data:[2,4.9,7,23.2,25.6,76.7,135.6,162.2,32.6,20,6.4,3.3]},{name:"成功率",type:"line",data:[2,2.2,3.3,4.5,6.3,10.2,20.3,23.4,23,16.5,12,6.2]}]};t.getRequest({url:"keyCollection/analysis",method:"post",param:{searchDate:t.search.searchDate},success:function(i){var a=[],s={first:"",other:"",succRate:""},l=[],o=[],r=[];if(i.data&&i.data.length>0){null!==t.line&&""!==t.line&&void 0!==t.line&&t.line.dispose(),t.line=echarts.init(document.getElementById("lineCharts"));for(var n=0;n<i.data.length;n++){var c=i.data[n],h=c.successRate;r.push(h),a.push(c.collectTime.split(" ")[1]),l.push(c.failCount),o.push(c)}s.first=l,s.other=o,s.succRate=r,e.xAxis.data=a,e.series[0].data=s.first,e.yAxis[0].min=Math.min.apply(null,s.succRate),e.series[1].data=s.succRate,e.tooltip.formatter=function(t){var e=t[0],i=s.other[e.dataIndex];return" 时间："+i.collectTime+" <br/> 失败数："+e.value+"<br/> 成功率："+i.successRate+"% <br/>"},t.$nextTick(function(){t.line.setOption(e,!0)})}else t.line.dispose(),t.showLine=!1,setTimeout(function(){t.showLine=!0},0)},error:function(){t.showLine=!1,setTimeout(function(){t.showLine=!0},0)}},!0)},getDetails:function(t){this.resultRow=t.val,this.resoluteTableShow(),this.btnGroup[1].num=this.resultRow.failCount},closeResult:function(){this.$refs.resultData.close(),this.resultShow=!1,this.tabIndex=0,this.btnGroup[0].num=this.btnGroup[1].num=0},resoluteTableShow:function(){var t=this;this.resultOpt.queryParam={queueGuid:this.resultRow.queueGuid,collectDate:this.resultRow.collectTime.split(" ")[0]},this.resultOpt.url=this.btnGroup[0].url,this.resultOpt.column=this.restCols[0],this.resultShow=!0,this.$refs.resultData.show({hasClose:!0,action:{cancel:function(){t.closeResult()}}})},getTab:function(t){this.tabIndex=t;var e=this.restCols[t];this.$refs.resoluteTable.resetTableOpt({queryParam:{queueGuid:this.resultRow.queueGuid,collectDate:this.resultRow.collectTime.split(" ")[0]},column:e,url:this.btnGroup[t].url})},getTotals:function(t){this.btnGroup[this.tabIndex].num=t},resizeCon:function(){var t=this;""!==t.line&&t.line.resize(),t.$refs.myTable&&t.$refs.myTable.onResize()},windowChange:function(){this.resizeCon()},init:function(){var t=this;this.tableOption.isExport=this.controls[6],this.tableOption.column=this.columns,this.tableOption.queryParam={searchDate:this.search.searchDate},this.tableOption.height=this.$refs.myOwnTable.clientHeight-60,t.tableShow=!0,this.makeLine()}},mounted:function(){this.isIn(),this.getAction()},created:function(){}}},850:function(t,e,i){var a=i(851);"string"==typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);i(33)("4a1916dc",a,!0,{})},851:function(t,e,i){e=t.exports=i(32)(!1),e.push([t.i,".info-container1{margin-top:5px}.lineCharts1{width:calc(100% - 2px);height:14.5em;float:left}.tabs-shows{margin:.8em 0 0;float:right}.tabs-shows .date-picker .date-button{line-height:1.9}.tabs-shows .date-picker .date-button .icon-date{margin-top:-.1em!important}",""])},852:function(t,e,i){"use strict";var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{ref:"trys",staticClass:"all-container",staticStyle:{height:"100%"}},[i("div",{staticClass:"tabs-show tabs-shows",staticStyle:{margin:"0.8em 0 0 0"}},[i("datePicker",{ref:"search.searchDate",attrs:{dateOpt:t.searchOption},on:{getDatePicker:t.getFrom}})],1),t._v(" "),i("div",{staticStyle:{height:"18em",background:"transparent"}},[i("div",[t.showLine?i("div",{staticClass:"lineCharts1",attrs:{id:"lineCharts"}},[t._m(0)]):t._e()])]),t._v(" "),i("div",{staticStyle:{"font-size":"0.94em",height:"calc(100% - 20em)",background:"transparent","margin-top":"0.5em"}},[i("div",{ref:"myOwnTable",staticClass:"table-container",staticStyle:{height:"calc(100% )"}},[t.tableShow?i("tables",{ref:"myTable",staticClass:"dialogTable",staticStyle:{margin:"0em",width:"100%"},attrs:{tableOpt:t.tableOption},on:{rowDbClick:t.getDetails}}):t._e()],1)]),t._v(" "),i("dialogs",{ref:"alerts",attrs:{type:"alert"}}),t._v(" "),i("dialogs",{ref:"resultData",staticClass:"dialogTable ",attrs:{type:"customer",width:"54em",maxHeight:"600px"}},[i("div",{attrs:{slot:"header"},slot:"header"},[t._v("\n      采集结果\n    ")]),t._v(" "),i("div",{staticClass:"tableContents",attrs:{slot:"content"},slot:"content"},[i("div",{staticClass:"tabs-show tab-div ",staticStyle:{margin:"0 0 0.6em 0!important",float:"left"}},[i("ul",t._l(t.btnGroup,function(e,a){return i("li",{class:{selectedLi:t.tabIndex===a},on:{click:function(e){t.getTab(a)}}},[t._v("\n            "+t._s(e.name)+" ( "+t._s(e.num)+" )\n          ")])}))]),t._v(" "),i("div",{staticClass:"tabContent",staticStyle:{height:"340px",float:"left","padding-top":"0","font-size":"1.1em"}},[t.resultShow?i("tables",{ref:"resoluteTable",attrs:{tableOpt:t.resultOpt},on:{getTotals:t.getTotals}}):t._e()],1)])])],1)},s=[function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"emptyShowPic"},[i("div",{staticClass:"emptyContent"},[i("img",{attrs:{src:"dist/img/empty-data.png"}}),t._v(" "),i("p",[t._v("查不到相关数据")])])])}],l={render:a,staticRenderFns:s};e.a=l}});
//# sourceMappingURL=41.build.js.map